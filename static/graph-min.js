(function(){var p,l,v,q,w,m,r;l={};p={US:{data:{"1":8782,"2":9891,"3":15130,"4":19064,"5":14047,"6":17968,"7":24062,"8":13477,"9":8442,"10":6827},total:137690},CA:{data:{"1":1370,"2":1373,"3":2178,"4":2697,"5":2195,"6":2564,"7":3234,"8":1952,"9":1274,"10":1105},total:19942},GB:{data:{"1":884,"2":978,"3":1305,"4":1875,"5":1375,"6":1707,"7":2006,"8":1088,"9":758,"10":724},total:12700},AU:{data:{"1":418,"2":437,"3":588,"4":732,"5":521,"6":635,"7":929,"8":451,"9":349,"10":327},total:5387},DE:{data:{"1":238,
"2":234,"3":317,"4":382,"5":403,"6":378,"7":598,"8":330,"9":203,"10":214},total:3297}};r=function(){var c;c=[];for(m=1;m<=10;m++)c.push([m,0]);return c}();q=null;w=function(){return $.getJSON("/data/",{},function(c){l=c;return v()})};v=function(){var c,h,e,d,b,i,j,a,s,x,f,n,k,t,o,y,u;f=l.breakdown;e=l.overtime;$("#spinner").hide();$("#graphs").show();i={overall:$("#overview-graph"),input:$("#input-graph"),radio:$("#radio-graph"),select:$("#select-graph"),slider:$("#slider-graph"),overtime:$("#overtime-graph"),
country:$("#country-graph")};q=f.input.random_not_specified.generated;t=0;for(b in f){k=f[b];c=[];u=["random_specified","random_not_specified"];o=0;for(y=u.length;o<y;o++){j=u[o];n=k[j];x=j.replace(/_/g," ");for(a=1;a<=10;a++){r[a-1][1]+=n.data[a-1];t+=n.data[a-1]}j=function(){var g;g=[];for(a=1;a<=10;a++)g.push([a,n.data[a-1]]);return g}();c.push({label:x,bars:{show:true,align:"center",barwidth:0.1},data:j})}$.plot(i[b],c)}$.plot(i.overall,[{bars:{show:true,align:"center"},data:r}]);c=[];b=[];k=
f=0;for(d in e){b=e[d];f=b[0][0];k=b[b.length-1][0];c.push({label:(parseInt(d)+1).toString(),lines:{show:true},data:b})}e=(k-f)/4;b=[f];for(a=1;a<=4;a++){d=f+e*a;b.push(d)}a=0;for(e=b.length;0<=e?a<e:a>e;0<=e?a+=1:a-=1){d=new Date(b[a]*1E3);b[a]=[b[a],""+d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+d.getHours()+":"+d.getMinutes()]}$.plot(i.overtime,c,{xaxis:{ticks:b}});e=[];for(h in p){c=p[h];d=[];b=c.data;for(s in b){f=b[s];d.push([parseInt(s),f/c.total])}e.push({label:h,lines:{show:true},
data:d})}h={xaxis:{ticks:function(){var g;g=[];for(a=1;a<=10;a++)g.push([a,a]);return g}()}};$.plot(i.country,e,h);return $("#as-of").html("Here's a breakdown as of <strong>"+q+"</strong><br>Total votes: <strong>"+t+"</strong>")};$(document).ready(function(){return w()})}).call(this);
